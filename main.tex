%%%% Proceedings format for most of ACM conferences (with the exceptions listed below) and all ICPS volumes.
%%%% As of March 2017, [siggraph] is no longer used. Please use sigconf (above) for SIGGRAPH conferences.
%%%% Proceedings format for SIGPLAN conferences 
% \documentclass[sigplan, anonymous, review]{acmart}
%%%% Proceedings format for SIGCHI conferences
% \documentclass[sigchi, review]{acmart}
%%%% To use the SIGCHI extended abstract template, please visit
% https://www.overleaf.com/read/zzzfqvkmrfzn

%\documentclass[sigplan, anonymous, review]{acmart}
\documentclass[sigconf]{acmart}
%\documentclass[sigconf, anonymous, review]{acmart}
%\documentclass[sigconf]{acmart}


\usepackage{booktabs} % For formal tables
\usepackage{hyperref}
\usepackage{siunitx}
\usepackage{xspace}


\usepackage{lstcustom}

\lstdefinelanguage{Xtext}[]{Java}{
	morekeywords={grammar, with, hidden, generate, as, import, returns, current, terminal, enum},
	keywordstyle=[2]{\textbf},
	morestring=[b]",
	tabsize=3
}
\newcommand{\lstXtext}[1]{\lstinline[breaklines=true,language=Xtext,basicstyle=\listingsfontinline,mathescape,literate={\-}{}{0\discretionary{-}{}{}}]\S#1\S}


\lstdefinelanguage{DRL}[]{Java}{
	morekeywords={rule, when, from, accumulate, and, in, then, for, int, end},
	keywordstyle=[2]{\textbf},
	morecomment=[l]{//}, 
	morecomment=[s]{/*}{*/}, 
	morestring=[b]",
	tabsize=2
}

\lstdefinelanguage{Freemarker}[]{Java}{
	morekeywords={if, assign, else},
	keywordstyle=[2]{\textbf},
	morecomment=[l]{//}, 
	morecomment=[s]{/*}{*/}, 
	morestring=[b]",
	showspaces=false,
	tabsize=2
      }

\lstdefinelanguage{DSL}[]{Java}{
	morekeywords={rule, type, materials, conditions, cond, values},
	keywordstyle=[2]{\textbf},
	morecomment=[l]{//}, 
	morecomment=[s]{/*}{*/}, 
	morestring=[b]",
	showspaces=false,
	tabsize=2
}

\lstdefinelanguage{Cucumber}[]{Java}{
	morekeywords={Feature, Scenario, Given, And, When, Then},
	keywordstyle=[2]{\textbf},
	morecomment=[l]{//}, 
	morecomment=[s]{/*}{*/}, 
	morestring=[b]",
	showspaces=false,
	tabsize=2
}

\lstdefinelanguage{Plugin}[]{Java}{
	morekeywords={plugin, groupId, artifactId, version, executions, execution, id, configuration, seed, qcs, goals, goal},
	keywordstyle=[2]{\textbf},
	morecomment=[l]{//}, 
	morecomment=[s]{/*}{*/}, 
	morestring=[b]",
	showspaces=false,
	tabsize=2
}


%TODO: remover esses pacotes qdo traduzir para ingles
%\usepackage[brazil]{babel}
%\usepackage[utf8]{inputenc}
%\usepackage[T1]{fontenc}


% Copyright
%\setcopyright{none}
%\setcopyright{acmcopyright}
%\setcopyright{acmlicensed}
\setcopyright{rightsretained}
%\setcopyright{usgov}
%\setcopyright{usgovmixed}
%\setcopyright{cagov}
%\setcopyright{cagovmixed}


% DOI
\acmDOI{10.475/123_4}

% ISBN
\acmISBN{123-4567-24-567/08/06}

%Conference
\acmConference[SBCARS 2018]{12th Brazilian Symposium on Software Components, Architectures, and Reuse}{September 2018}{S\~{a}o Carlos, S\~{a}o Paulo, Brazil}
\acmYear{2018}
\copyrightyear{2018}

\acmArticle{4}
\acmPrice{15.00}

%\acmBadgeL[http://ctuning.org/ae/ppopp2016.html]{ae-logo}
%\acmBadgeR[http://ctuning.org/ae/ppopp2016.html]{ae-logo}


\begin{document}

\title[On the Use of Metaprogramming and DSL: An Experience Report]{On the Use of Metaprogramming and Domain Specific Languages: An Experience Report in the Logistics Domain} 


\author{Pedro Henrique Teixeira Costa, Edna Dias Canedo and Rodrigo Bonif\'{a}cio de Almeida}
 \email{pedro.costa@aluno.unb.br, ednacanedo@unb.br, rbonifacio@unb.br}
 \affiliation{
  \institution{Computer Science Department, University of Bras\'{i}lia - (UnB)}
  \streetaddress{P.O. Box 4466}
  \city{Bras\'{i}lia}
  \state{DF}
  \postcode{70910-900}
}

\renewcommand{\shortauthors}{-}

\newcommand{\callers}{\emph{high-level rules}\xspace}
\newcommand{\shc}{HLR\xspace}

\begin{abstract}
In this paper we present the main design and architectural decisions to build an enterprise system that deals with the distribution of equipment to the Brazilian Army. The requirements of the system are far from trivial, and we have to conciliate the need to extract business rules from the source code (increasing software flexibility) with the requirements of not exposing the use of declarative languages to use a rule-based engine and simplifying the tests of the application. Considering these goals, we present in this paper a seamless integration of meta-programming and domain-specific languages. The use of meta-programming allowed us to isolate and abstract all definitions necessary to externalize the business rules that ensure the correct distribution of the equipment through the Brazilian Army unities. The use of a domain specific language simplified the process of writing automatic test cases related to our domain. Although our architecture targets the specific needs of the Brazilian Army, we believe that logistic systems from other institutions might also benefit from our technical decisions.
\end{abstract}

%
% The code below should be generated by the tool at
% http://dl.acm.org/ccs.cfm
% Please copy and paste the code instead of the example below.
%
\begin{CCSXML}
<ccs2012>
<concept>
<concept_id>10010405.10010406.10010423</concept_id>
<concept_desc>Applied computing~Business rules</concept_desc>
<concept_significance>500</concept_significance>
</concept>
<concept>
<concept_id>10010405.10010476.10010478</concept_id>
<concept_desc>Applied computing~Military</concept_desc>
<concept_significance>500</concept_significance>
</concept>
<concept>
<concept_id>10010147.10010178.10010187</concept_id>
<concept_desc>Computing methodologies~Knowledge representation and reasoning</concept_desc>
<concept_significance>300</concept_significance>
</concept>
<concept>
<concept_id>10011007.10011006.10011041.10011047</concept_id>
<concept_desc>Software and its engineering~Source code generation</concept_desc>
<concept_significance>300</concept_significance>
</concept>
<concept>
<concept_id>10011007.10011006.10011050.10011023</concept_id>
<concept_desc>Software and its engineering~Specialized application languages</concept_desc>
<concept_significance>300</concept_significance>
</concept>
<concept>
<concept>
<concept_id>10011007.10010940.10010971.10010972.10010539</concept_id>
<concept_desc>Software and its engineering~n-tier architectures</concept_desc>
<concept_significance>100</concept_significance>
</concept>
<concept>
<concept_id>10011007.10011074.10011081.10011082.10011083</concept_id>
<concept_desc>Software and its engineering~Agile software development</concept_desc>
<concept_significance>100</concept_significance>
</concept>
</ccs2012>
\end{CCSXML}

\ccsdesc[500]{Applied computing~Business rules}
\ccsdesc[500]{Applied computing~Military}
\ccsdesc[300]{Computing methodologies~Knowledge representation and reasoning}
\ccsdesc[300]{Software and its engineering~Source code generation}
\ccsdesc[300]{Software and its engineering~Specialized application languages}
\ccsdesc[100]{Software and its engineering~n-tier architectures}
\ccsdesc[100]{Software and its engineering~Agile software development}


\keywords{Software Architecture, Generative Programming and Domain Specific Languages, Military Logistics}

%\begin{teaserfigure}
%  \includegraphics[width=\textwidth]{tmp/sampleteaser}
%  \caption{This is a teaser}
%  \label{fig:teaser}
%\end{teaserfigure}


\maketitle

\input{introduction}
%\input{methodology}
\input{theory}
%\input{requirements}
\input{architecture} 
\input{empirical-study} 
\input{related-works} 
\input{conclusion}
\input{ack}
% \section{Acknowledgments}
% \label{sec:Acknowledgments}

% The authors would like to thank the Brazilian Army for their support to this work and to allow our University to conduct this research in the context of a real software modernization effort (FUB / CIC 6138/2016).

\bibliographystyle{ACM-Reference-Format}
\bibliography{bibliography}

\input{appendix}

\end{document}
